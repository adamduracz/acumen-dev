model Main(simu)
  = initially
    mode  =  "Init"
  always
  switch mode
    case "Init"
      simu.timeStep + == 1 &
      simu.alwaysTime + == 1 &
      create Test("Init") &
      mode + == "Idle"
    case "Idle"
  end
end

model Test(mode)
  = initially 
    c1  =  create A() &
    c2  =  create A()
  always

  switch mode
    case "Init"
      mode + == "Reparent"
    case "Reparent"
      move c1.x c2 &
      mode + == "Done"
    case "Done"
  always
 

model A()
  = initially
    x  =  create B()
  always
 

model B() always
