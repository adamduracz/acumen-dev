/* in Test: after the first move, c1.x is no longer
            a child of c1 
*/

model Main(simu)
  = initially
    mode  =  "Init"
  always
  match mode with[
    case "Init"
      simu.timeStep + == 1 &
      simu.endTime + == 1 &

      create Test("Init") &
      mode + == "Idle"
    case "Idle"
  
end

model Test(mode)
  = initially 
    c1  =  create A() &
    c2  =  create A()
  always

  switch mode
    case "Init"
      mode + == "Reparent"
    case "Reparent"
      move c1.x c2 &
      mode + == "Done"
    case "Done"
      move c1.x c2
  end
end

model A()
  = initially
    x  =  create B()
  always
 

model B() always
