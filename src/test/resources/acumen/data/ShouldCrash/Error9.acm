/* in Test: after the first move, c1.x is no longer
            a child of c1 
*/

class Main(simu)
  private
    mode = "Init"
  end
  switch mode
    case "Init"
      simu.timeStep = 1;
      simu.endTime = 1;

      create Test("Init");
      mode = "Idle"
    case "Idle"
  end
end

class Test(mode)
  private 
    c1 = create A();
    c2 = create A()
  end

  switch mode
    case "Init"
      mode = "Reparent"
    case "Reparent"
      move c1.x c2;
      mode = "Done"
    case "Done"
      move c1.x c2
  end
end

class A()
  private
    x = create B()
  end
end

class B() end
